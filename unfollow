(async () => {
    function delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    let stop = false;
    let unfollowedCount = 0;

    console.log("üöÄ Mulai unfollow massal... Pastikan kamu ada di halaman 'following' IG.");

    while (!stop) {
        // Cari tombol "Following" atau "Diikuti"
        let buttons = [...document.querySelectorAll('button')]
            .filter(b => /Following|Diikuti/i.test(b.innerText));

        if (buttons.length === 0) {
            stop = true;
            console.log("‚úÖ Sudah selesai, tidak ada tombol lagi.");
            break;
        }

        for (let btn of buttons) {
            btn.click();
            await delay(1000);

            // Cari tombol konfirmasi
            let confirmBtn = [...document.querySelectorAll('button')]
                .find(b => /Unfollow|Berhenti mengikuti/i.test(b.innerText));
            if (confirmBtn) {
                confirmBtn.click();
                unfollowedCount++;
                console.log(`‚ùå Unfollow ke-${unfollowedCount}`);
                await delay(3000); // jeda 3 detik biar aman
            }
        }

        window.scrollBy(0, 1000);
        await delay(2000);
    }

    console.log(`üéØ Total akun di-unfollow: ${unfollowedCount}`);
})();
